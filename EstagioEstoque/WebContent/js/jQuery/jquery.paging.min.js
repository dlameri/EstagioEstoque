/*
 jQuery paging plugin v1.1.0 09/04/2011
 http://www.xarg.org/2011/09/jquery-pagination-revised/

 Copyright (c) 2011, Robert Eisele (robert@xarg.org)
 Dual licensed under the MIT or GPL Version 2 licenses.
*/
(function(m,s,q){m.fn.paging=function(y,z){var w=this,v={setOptions:function(a){this.a=m.extend(this.a||{lapping:0,perpage:10,page:1,refresh:{interval:10,url:null},format:"",onLock:null,onFormat:function(){},onSelect:function(){return!0},onRefresh:function(){}},a||{});this.a.lapping|=0;this.a.perpage|=0;null!==this.a.page&&(this.a.page|=0);1>this.a.perpage&&(this.a.perpage=10);this.interval&&s.clearInterval(this.interval);this.a.refresh.url&&(this.interval=s.setInterval(function(a){m.ajax({url:a.a.refresh.url,
success:function(g){if("string"===typeof g)try{g=m.parseJSON(g)}catch(f){return}a.a.onRefresh(g)}})},1E3*this.a.refresh.interval,this));this.format=function(a){for(var g=0,f=0,h=1,d={d:[],g:0,f:0,b:5,current:3,i:0,j:0},b,n=/[*<>pq\[\]().-]|[nc]+!?/g,m={"[":"first","]":"last","<":"prev",">":"next",q:"left",p:"right","-":"fill",".":"leap"},e={};b=n.exec(a);)b=String(b),q===m[b]?"("===b?f=++g:")"===b?f=0:h&&("*"===b?(d.g=1,d.f=0):(d.g=0,d.f="!"===b.charAt(b.length-1),d.b=b.length-d.f,(d.current=1+b.indexOf("c"))||
(d.current=1+d.b>>1)),d.d[d.d.length]={e:"block",h:0,c:0},h=0):(d.d[d.d.length]={e:m[b],h:f,c:q===e[b]?e[b]=1:++e[b]},"q"===b?++d.j:"p"===b&&++d.i);return d}(this.a.format);return this},setNumber:function(a){this.l=q===a||0>a?-1:a;return this},setPage:function(a){function t(a,b,c){c=String(a.onFormat.call(b,c));n=b.value?n+c.replace(/<a/i,'<a data-page="'+b.value+'"'):n+c}if(q===a){if(a=this.a.page,null===a)return this}else if(this.a.page==a)return this;this.a.page=a|=0;if(null!==this.a.onLock)return this.a.onLock.call(null,
a),this;var g=this.l,f=this.a,h,d,b,n,u=1,e=this.format,c,k,l,p,x=e.d.length,r=x;f.perpage<=f.lapping&&(f.lapping=f.perpage-1);p=g<=f.lapping?0:f.lapping|0;0>g?(b=g=-1,h=Math.max(1,a-e.current+1-p),d=h+e.b):(b=1+Math.ceil((g-f.perpage)/(f.perpage-p)),a=Math.max(1,Math.min(0>a?1+b+a:a,b)),e.g?(h=1,d=1+b,e.current=a,e.b=b):(h=Math.max(1,Math.min(a-e.current,b-e.b)+1),d=e.f?h+e.b:Math.min(h+e.b,1+b)));for(;r--;){k=0;l=e.d[r];switch(l.e){case "left":k=l.c<h;break;case "right":k=d<=b-e.i+l.c;break;case "first":k=
e.current<a;break;case "last":k=e.b<e.current+b-a;break;case "prev":k=1<a;break;case "next":k=a<b}u|=k<<l.h}c={number:g,lapping:p,pages:b,perpage:f.perpage,page:a,slice:[(k=a*(f.perpage-p)+p)-f.perpage,Math.min(k,g)]};for(n="";++r<x;){l=e.d[r];k=u>>l.h&1;switch(l.e){case "block":for(;h<d;++h)c.value=h,c.pos=1+e.b-d+h,c.active=h<=b||0>g,c.first=1===h,c.last=h==b&&0<g,t(f,c,l.e);continue;case "left":c.value=l.c;c.active=l.c<h;break;case "right":c.value=b-e.i+l.c;c.active=d<=c.value;break;case "first":c.value=
1;c.active=k&&1<a;break;case "prev":c.value=Math.max(1,a-1);c.active=k&&1<a;break;case "last":(c.active=0>g)?c.value=1+a:(c.value=b,c.active=k&&a<b);break;case "next":(c.active=0>g)?c.value=1+a:(c.value=Math.min(1+a,b),c.active=k&&a<b);break;case "leap":case "fill":c.pos=l.c;c.active=k;t(f,c,l.e);continue}c.pos=l.c;c.last=c.first=q;t(f,c,l.e)}w.length&&(m("a",w.html(n)).click(function(a){a.preventDefault();a=this;do if("a"===a.nodeName.toLowerCase())break;while(a=a.parentNode);v.setPage(m(a).data("page"));
v.k&&(s.location=a.href)}),this.k=f.onSelect.call({number:g,lapping:p,pages:b,slice:c.slice},a));return this}};return v.setNumber(y).setOptions(z).setPage()}})(jQuery,this);

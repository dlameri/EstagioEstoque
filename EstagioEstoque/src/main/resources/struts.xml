<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN" "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>
	<constant name="struts.devMode" value="true" />
	<package name="basicstruts2" extends="json-default" >

		<interceptors>
			<interceptor-stack name="content">
				<interceptor-ref name="exception"/>
                <interceptor-ref name="alias"/>
                <interceptor-ref name="servletConfig"/>
                <interceptor-ref name="prepare"/>
                <interceptor-ref name="i18n"/>
                <interceptor-ref name="chain"/>
                <interceptor-ref name="debugging"/>
                <interceptor-ref name="profiling"/>
                <interceptor-ref name="scopedModelDriven"/>
                <interceptor-ref name="modelDriven"/>
                <interceptor-ref name="fileUpload"/>
                <interceptor-ref name="checkbox"/>
                <interceptor-ref name="staticParams"/>
                <interceptor-ref name="params">
                  <param name="excludeParams">dojo\..*</param>
                </interceptor-ref>
                <interceptor-ref name="conversionError"/>
                <interceptor-ref name="validation">
  	            <param name="validateAnnotatedMethodOnly">true</param>                
                    <param name="excludeMethods">input,back,cancel,browse</param>
                </interceptor-ref>
                <interceptor-ref name="workflow">
                    <param name="excludeMethods">input,back,cancel,browse</param>
                </interceptor-ref>
			</interceptor-stack>
	    </interceptors>


		<!-- Categorias -->
		
		<action name="categorias" class="com.ideais.stock.action.CategoryAction"
			method="listCategories">
			<result name="success">category.jsp</result>
			<result name="input">category.jsp</result>
		</action>

		<action name="addcategory" class="com.ideais.stock.action.CategoryAction"
			method="saveCategory">
			<result name="success" type="redirect">
				<param name="location">/web/categorias</param>
			</result>
			<result name="error" type="redirect">
				<param name="location">/web/categorias?error=true</param>
			</result>
			<result name="input" type="dispatcher">
				<param name="location">/web/category.jsp</param>
			</result>
		</action>

		<action name="deletecategory" class="com.ideais.stock.action.CategoryAction"
			method="deleteCategory">
			<result type="json">
				<param name="root">
					subcategoryJSONs
				</param>
			</result>
			<result name="error" type="redirect">
				<param name="location">/web/categorias?error=true</param>
			</result>
		</action>


		<!-- Subcategorias -->
		
		<action name="subcategorias" class="com.ideais.stock.action.SubcategoryAction"
			method="listSubcategories">
			<result name="success">subcategory.jsp</result>
		</action>

		<action name="addsubcategory" class="com.ideais.stock.action.SubcategoryAction"
			method="addSubcategory">
			<result name="success" type="redirect">
				<param name="location">/web/subcategorias</param>
			</result>
			<result name="error" type="redirect">
				<param name="location">/web/subcategorias?error=true</param>
			</result>
			<result name="input" type="dispatcher">
				<param name="location">/web/subcategory.jsp</param>
			</result>
		</action>

		<action name="deletesubcategory" class="com.ideais.stock.action.SubcategoryAction"
			method="deleteSubcategory">
			<result type="json">
				<param name="root">
					productJSONs
				</param>
			</result>
			<result name="error" type="redirect">
				<param name="location">/web/subcategorias?error=true</param>
			</result>
		</action>


		<!-- Produtos -->
		
		<action name="produtos" class="com.ideais.stock.action.ProductAction"
			method="listProducts">
			<result name="success">product.jsp</result>
		</action>

		<action name="saveProduct" class="com.ideais.stock.action.ProductAction"
			method="saveProduct">
			<result type="json">
				<param name="root">
					savedProduct
				</param>
			</result>
			<result name="error" type="redirect">
				<param name="location">/web/produtos?error=true</param>
			</result>
			<result name="input" type="dispatcher">
				<param name="location">/web/product.jsp</param>
			</result>
		</action>
		
		<action name="deleteProduct" class="com.ideais.stock.action.ProductAction"
			method="deleteProduct">
			<result type="json">
				<param name="root">
					itemJSONs
				</param>
			</result>
			<result name="error" type="redirect">
				<param name="location">/web/produtos?error=true</param>
			</result>
		</action>
		
		<action name="productForm" class="com.ideais.stock.action.ProductAction"
			method="getProductById">
			<result name="success">addproduct.jsp</result>
		</action>

		<action name="getCategories" class="com.ideais.stock.action.ProductAction"
			method="getCategoryList">
			<result type="json">
				<param name="root">
					categoryJSONs
				</param>
			</result>
			<result name="error"></result>
		</action>

		<action name="selectSubcategories" class="com.ideais.stock.action.ProductAction"
			method="getSubcategoryList">
			<result type="json">
				<param name="root">
					subcategories
				</param>
			</result>
			<result name="error"></result>
		</action>
		
		<action name="getPaginatedProducts" class="com.ideais.stock.action.ProductAction"
			method="getPaginatedProducts">
			<result type="json">
				<param name="root">
					productJSONs
				</param>
			</result>
			<result name="error"></result>
		</action>
		
		
		<!-- Itens -->
				
		<action name="itens" class="com.ideais.stock.action.ItemAction"
			method="listItems">
			<result name="success">item.jsp</result>
		</action>
		
		<action name="saveItem" class="com.ideais.stock.action.ItemAction"
			method="saveItem">
			<result type="json">
				<param name="root">
					savedItem
				</param>
			</result>
			<result name="error" type="redirect">
				<param name="location">/web/itens?error=true</param>
			</result>
			<result name="input" type="dispatcher">
				<param name="location">/web/item.jsp</param>
			</result>
		</action>
		
		<action name="deleteItem" class="com.ideais.stock.action.ItemAction"
			method="deleteItem">
			<result name="success" type="redirect">
				<param name="location">/web/itens?deleted=true</param>
			</result>
			<result name="error" type="redirect">
				<param name="location">/web/itens?error=true</param>
			</result>
		</action>
		
		<action name="getItemsByProductId" class="com.ideais.stock.action.ItemAction"
			method="getItemsByProductId">
			<result type="json">
				<param name="root">
					itemJSONList
				</param>
			</result>
			<result name="error"></result>
		</action>
		
		

<!-- 		<action name="pageNotFound"> -->
<!-- 		    <result type="redirect"> -->
<!-- 		    	<param name="location">/web/404.jsp</param> -->
<!-- 		    </result> -->
<!-- 		</action> -->
		
<!-- 		<action name="*"> -->
<!-- 		    <result type="redirectAction"> -->
<!-- 		        <param name="actionName">/web/pageNotFound</param> -->
<!-- 		    </result> -->
<!-- 		</action> -->

	</package>
</struts>
